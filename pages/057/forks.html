<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../assets/css/style.css" />
    <link rel="shortcut icon" href="../../assets/favicon/favicon.png" type="image/x-icon" />
    <title>Forks</title>
  </head>

  <body>
    <div class="floating-div">
      <header>
        <div class="btn">
          <a href="../056/github_issues.html" class="previous">
            &laquo; Previous
          </a>
        </div>
        <div class="title">
          <h1>Forks</h1>
        </div>
        <div class="btn">
          <a href="../058/rewriting_history.html" class="next">
            Next &raquo;
          </a>
        </div>
      </header>
    </div>
    <main>
      <section>
        <div class="row">
          <div class="left-col">
            <p>
              So far, all that we've done included working with a repository to
              which we have push access. Suppose now that we've found an
              Open-Source project to which we want to collaborate. These kinds
              of projects use the Integration-Manager Workflow that we saw
              before. Therefore, we don't have push access to them. This is why,
              when contributing to open source projects, the first thing we need
              to do is to fork the project repository. This will create a new
              repository that we own and that has a copy of all the code and
              files in the original repository.
            </p>
          </div>
          <div class="right-col">
            <img src="forks_01.png" alt="Forks 1" class="github-img" />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img src="forks_02.png" alt="Forks 2" class="github-img" />
          </div>
          <div class="right-col">
            <p>
              The new repository will have the same name as the original one
              (though we can change it), and a legend will be displayed below
              our repository's name saying from which repository it was forked.
              Since this new repository is ours, we can push changes to it.
            </p>
            <br />
            <p>
              The first thing you need to do is to clone this new repository to
              your local machine so that you can work on it. Then, create a new
              branch where you will work on your proposed changes.
            </p>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              Most open-source projects welcome contributions as long as they
              are done following their contribution guide. Just as
              <em>README.md</em> and <em>LICENSE.md</em> are special files to
              GitHub, so too are files like <em>CONTRIBUTION_GUIDE.md</em> (or
              some variation of the name), <em>CODE_OF_CONDUCT.md</em>, and
              templates for issues and PRs. You can usually find all this
              information in either the root directory of a repository, a
              special folder set for this, or a Wiki page (under the Wiki tab of
              the repository).
            </p>
          </div>
          <div class="right-col">
            <img src="forks_03.png" alt="Forks 3" class="github-img" />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img src="forks_04.png" alt="Forks 4" class="git-bash-img" />
          </div>
          <div class="right-col">
            <p>
              Once you've made all your changes, push them onto your forked
              repository. Remember that the first time you push a new branch,
              you need to set the upstream with
            </p>
            <div class="code">
              <code>git push -u <em>remote_name</em> <em>branch_name</em></code>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              Once you are done making and pushing all your changes, go back to
              GitHub and start a new PR.
            </p>
          </div>
          <div class="right-col">
            <img src="forks_05.png" alt="Forks 5" class="github-img" />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img src="forks_06.png" alt="Forks 6" class="git-bash-img" />
          </div>
          <div class="right-col">
            <p>
              The only difference between this PR and the PRs we saw earlier, is
              that now you are going to be comparing the new branch on your
              repository, with a branch (in this case <em>main</em>) from the
              original repository.
            </p>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              After clicking on the <em>Create pull request</em> button, GitHub
              will create it <em>IN THE ORIGINAL REPOSITORY</em>. There we can
              start a conversation with the maintainers of the project. They
              might request additional changes from us, or to expand our
              explanation or documentation of what our code does.
            </p>
            <br />
            <p>
              But notice that we are not allowed to merge the PR into the
              original repository. Only maintainers can do so.
            </p>
            <br />
            <p>
              Keep in mind that if we push more changes onto the branch that
              we've created while the PR is in progress, these changes will
              impact not only the branch in our fork but the PR too.
            </p>
          </div>
          <div class="right-col">
            <img src="forks_07.png" alt="Forks 7" class="github-img" />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img src="forks_08.png" alt="Forks 8" class="git-bash-img" />
          </div>
          <div class="right-col">
            <p>
              Whenever you find yourself in the position of the maintainer,
              merging this type of PR is no different than merging any other PR.
              Once that you and the contributor have finished discussing the
              changes and you are ready to merge them, just click on the
              <em>Merge pull request</em> button. If there are any conflicts
              you'll have to resolve them or ask the contributor to make a new
              push and that solves them, before clicking on the merge button.
            </p>
            <br />
            <p>Once the merger is done, the PR will be closed.</p>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              Now that your PR has been merged into the original repository, if
              you go back to your forked repository on GitHub, you'll notice a
              message saying that your fork is an x number of commits behind the
              base repository. This happens because even though our fork knows
              about the existence of the original repository, GitHub does not
              automatically keep them in sync. We need to do this manually.
            </p>
            <br />
            <p>
              Therefore, we need to be able to pull the new changes from the
              base repository onto our local repository of the forked
              repository. To do so, we need to set up a new reference between
              our local repository and the original remote upstream.
            </p>
          </div>
          <div class="right-col">
            <img src="forks_09.png" alt="Forks 9" class="miro-img" />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img src="forks_10.png" alt="Forks 10" class="git-bash-img" />
          </div>
          <div class="right-col">
            <p>Let's start by checking our current remotes. To so, we run</p>
            <div class="code">
              <code>git remote -v</code>
            </div>
            <p>
              Git will show us our current remotes and the URL from where they
              fetch or push to. When we clone a repository onto our machine, Git
              will automatically create the
              <span class="inline-code">origin</span> remote. In this case, this
              remote refers to our forked repository. To add a new one that
              points to the original upstream repository we run
            </p>
            <div class="code">
              <code>
                git remote add <em>remote_name</em> <em>remote_url</em>
              </code>
            </div>
            <p>
              Here <span class="inline-code">remote_name</span> can be anything
              you want, but it's most common to call them either
              <span class="inline-code">base</span> or
              <span class="inline-code">upstream</span>. The
              <span class="inline-code">remote_url</span> we are referring to is
              the URL of the original repository.
            </p>
          </div>
        </div>
        <div class="row">
          <div class="single-col">
            <p>If you want to change the name of a remote, just run</p>
            <div class="code">
              <code>
                git remote rename <em>current_name</em> <em>new_name</em>
              </code>
            </div>
            <p>Similarly, to remove a remote, we run</p>
            <div class="code">
              <code>git remote rm <em>remote_name</em></code>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              Now we can bring in the new changes in the original repository by
              using the <span class="inline-code">fetch</span> or
              <span class="inline-code">pull</span> commands. Remember that when
              we <span class="inline-code">fetch</span> or
              <span class="inline-code">pull</span> we need to supply the name
              of the <span class="inline-code">remote</span> from where Git is
              supposed to <span class="inline-code">fetch</span> or
              <span class="inline-code">pull</span>. When we omit this, Git
              assumes that we want to use the
              <span class="inline-code">origin</span>. But in this case, we must
              include it, since we want Git to bring in changes that are not in
              our <span class="inline-code">origin</span> but in a different
              <span class="inline-code">remote</span>. So, we run
            </p>
            <div class="code">
              <code>git fetch <em>remote_name</em></code>
            </div>
            <p>
              Notice that now we have a new branch called
              <span class="git-red">base/main</span>. If we take a look at our
              log, we can see that this branch is ahead of our local
              <span class="git-green">main</span> branch. So we need to merge
              <span class="git-red">base/main</span> onto
              <span class="git-green">main</span>. Luckily, there's nothing
              special about this merge.
            </p>
            <br />
            <p>
              Since our local repository is now in sync with the original
              repository, we can push these changes into our forked repository
              and it too will be up-to-date with the original one.
            </p>
          </div>
          <div class="right-col">
            <img src="forks_11.png" alt="Forks 11" class="git-bash-img" />
          </div>
        </div>
        <div class="row">
          <div class="single-col">
            <p>
              One thing you may have noticed is that we never merged the branch
              where we made our proposed changes onto the main branch of our
              repository. You can do so if you want. But our changes got brought
              into our local and remote main branches via the pull (or fetch)
              from the original repository in its post-PR state. So they are
              there already.
            </p>
            <br />
            <p>
              If you decide to go ahead and merge anyway, keep in mind that the
              maintainer of the original repository may have changed our code
              when merging (maybe he/she fixed some merge conflicts for
              example). By merging our branch onto main we may be reintroducing
              those merge conflicts. So it's usually best to just throw them
              away (unless our changes were rejected by the maintainer but we'd
              still like to keep them).
            </p>
            <br />
            <p>
              A final comment. When contributing to open source projects is
              usually customary that before we send a PR, we pull in the most
              recent changes from the original repository first, merge the main
              branch onto our proposed changes, and then start a PR. This
              decreases the number of merge conflicts that could happen when
              merging our PR into the original repository.
            </p>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <a class="go-home" href="../../index.html"><i class="fas fa-home"></i></a>
    </footer>
    <script src="https://kit.fontawesome.com/994cc6cf8e.js" crossorigin="anonymous"></script>
  </body>

</html>
